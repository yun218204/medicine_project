<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å¥åº·ç¶²ç«™</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  </head>
  <style>
    li {
      list-style-type: none;
    }
  </style>
  <body>
    <header class="bannercontainer">
      <img src="../img/pero-kalimero-9BJRGlqoIUk-unsplash.jpg" alt="å°é¢åœ–ç‰‡" />

      <div class="text-container">
        <h1>é¤Šæˆç¿’æ…£ï¼Œå¾ç¾åœ¨é–‹å§‹</h1>
        <p>Healthy habits, happier life</p>

        <div class="button-container">
          <button class="btn btn-login">æœƒå“¡ç™»å…¥</button>
          <button class="btn btn-register">è¨»å†Šæœƒå“¡</button>
        </div>
      </div>
    </header>
    <main>
      <section class="medicine-log">
        <h2 id="greeting">æ‚¨å¥½ï¼Œè«‹å…ˆç™»å…¥å†ä½¿ç”¨</h2>

        <div class="input-group">
          <input type="text" id="medicine-name" placeholder="è¼¸å…¥è—¥ç‰©åç¨±" />
          <button id="record-btn">æˆ‘è¦ç´€éŒ„</button>
          <div id="clock">00:00:00</div>
        </div>

        <ul id="medicine-list">
          <!-- åƒè—¥ç´€éŒ„æœƒé¡¯ç¤ºåœ¨é€™è£¡ -->
        </ul>
      </section>
    </main>
    <footer></footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const loginBtn = document.querySelector(".btn-login");
        const mainSection = document.querySelector("main");
        const greeting = document.getElementById("greeting");

        loginBtn.onclick = function () {
          if (loginBtn.textContent === "æœƒå“¡ç™»å…¥") {
            let username = prompt("è«‹è¼¸å…¥æ‚¨çš„ä½¿ç”¨è€…åç¨±");
            if (!username) {
              alert("è«‹è¼¸å…¥åç¨±!");
              return;
            } //æœ‰è¼¸å…¥åç¨±æ‰æœƒåŸ·è¡Œä¸‹é¢ç¨‹å¼ç¢¼
            localStorage.setItem("username", username.trim()); // å„²å­˜ä½¿ç”¨è€…è³‡æ–™
            greeting.textContent = `${username.trim()}ï¼Œæ‚¨å¥½ï¼é€™æ˜¯æ‚¨çš„ç”¨è—¥ç´€éŒ„`;
            mainSection.style.display = "block";
            loginBtn.textContent = "æœƒå“¡ç™»å‡º";
          } else {
            localStorage.removeItem("username");
            //mainSection.style.display = "none";
            greeting.textContent = "æ‚¨å¥½ï¼Œè«‹å…ˆç™»å…¥å†ä½¿ç”¨";
            loginBtn.textContent = "æœƒå“¡ç™»å…¥";
          }
        };
        //ç¢ºèªç™»å…¥ç‹€æ…‹
        const saveName = localStorage.getItem("username");
        console.log(saveName);
        if (saveName) {
          greeting.textContent = `${saveName}ï¼Œæ‚¨å¥½ï¼é€™æ˜¯æ‚¨çš„ç”¨è—¥ç´€éŒ„`;
          mainSection.style.display = "block";
          loginBtn.textContent = "æœƒå“¡ç™»å‡º";
        }
        //æ™‚é–“
        function time() {
          const nowTime = new Date();
          //console.log(nowTime);
          const years = String(nowTime.getFullYear());
          const hours = String(nowTime.getHours()).padStart(2, "0"); //ç¢ºä¿æ˜¯äºŒä½æ•¸ å¦‚æœæ²’æœ‰ å‰é¢è£œ0
          const minutes = String(nowTime.getMinutes()).padStart(2, "0");
          const seconds = String(nowTime.getSeconds()).padStart(2, "0");
          const timeString = `${years}å¹´${hours}:${minutes}:${seconds}`;
          clock.textContent = timeString;
        }
        setInterval(time, 1000);
        // time();

        //ç´€éŒ„
        $(document).ready(function () {
          $("#record-btn").on("click", function () {
            const medname = $("#medicine-name").val().trim(); //å–å¾—è¼¸å…¥æ¡†çš„å€¼
            console.log(medname);
            if (medname === "") {
              alert("è«‹è¼¸å…¥è—¥å“åç¨±!");
              return;
            }
            //å–å¾—ç¾åœ¨æ™‚é–“
            const now = new Date();

            const years = String(now.getFullYear());
            const hours = String(now.getHours()).padStart(2, "0");
            const minutes = String(now.getMinutes()).padStart(2, "0");
            const seconds = String(now.getSeconds()).padStart(2, "0");
            const timeString = `${years}å¹´${hours}:${minutes}:${seconds}`;
            // è—¥å“åç¨±å’Œæ™‚é–“çµ„åˆ
            const record = `<li>ğŸ•’ ${timeString} - å·²æœç”¨ğŸ’Š ${medname}</li>`;
            // æ–°å¢åˆ° `#medician-list`
            $("#medicine-list").append(record);
            // æ¸…ç©ºè¼¸å…¥æ¡†
            $("#medicine-name").val(""); //æ¯æ¬¡è¼¸å…¥å®Œéƒ½æœƒè®Šç©º
          });
        });
      });
    </script>
  </body>
</html>
